<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Audio Player Add-on</title>
</head>
<body>
    <script>
        // Configuration
        const GOOGLE_DRIVE_AUDIO_URL = 'https://drive.google.com/uc?export=download&id=1pUa3Sq8uJHHx3F4jtOI1jeveYRyXIppv';

        // Function to create and play audio
        function createAudioPlayer() {
            const audio = new Audio(GOOGLE_DRIVE_AUDIO_URL);
            audio.play().catch(error => console.error('Audio playback failed:', error));
        }

        // Function to handle slide changes
        function onSlideChange(event) {
            if (event.type === 'slideChange') {
                createAudioPlayer();
            }
        }

        // Initialize the add-on
        function initializeAddon() {
            if (typeof parent.Genially !== 'undefined' && parent.Genially.on) {
                parent.Genially.on('slideChange', onSlideChange);
                console.log('Auto Audio Player add-on initialized');
            } else {
                console.error('Genially API not available');
            }
        }

        // Run initialization when the document is ready
        if (document.readyState === 'complete') {
            initializeAddon();
        } else {
            window.addEventListener('load', initializeAddon);
        }
    </script>
</body>
</html>